<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Analysis Result - Resume Analyzer Pro</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body class="result-page">

    <div class="particles"></div>

    <div class="container">
        <div class="result-card">
            
            <!-- Header -->
            <div class="result-header">
                <h1>üìä Resume Analysis Complete</h1>
                <p class="field-badge">{{ selected_field|capitalize }}</p>
            </div>

            <!-- Main Scores Grid -->
            <div class="scores-grid">
                <!-- Overall Score -->
                <div class="score-card primary">
                    <div class="score-header">
                        <h3>Overall Score</h3>
                        <span class="badge badge-{{ strength|lower }}">{{ strength }}</span>
                    </div>
                    <div class="circular-progress">
                        <svg width="160" height="160">
                            <circle cx="80" cy="80" r="70" class="progress-bg"></circle>
                            <circle cx="80" cy="80" r="70" class="progress-bar" 
                                    style="stroke-dasharray: {{ (score / 100 * 439.6)|round(2) }} 439.6;"></circle>
                        </svg>
                        <div class="score-value">
                            <span class="score-number">{{ score }}</span>
                            <span class="score-total">/100</span>
                        </div>
                    </div>
                </div>

                <!-- ATS Score -->
                <div class="score-card">
                    <div class="score-header">
                        <h3>ATS Compatibility</h3>
                        <span class="badge badge-{{ ats_strength|lower }}">{{ ats_strength }}</span>
                    </div>
                    <div class="circular-progress small">
                        <svg width="140" height="140">
                            <circle cx="70" cy="70" r="60" class="progress-bg"></circle>
                            <circle cx="70" cy="70" r="60" class="progress-bar ats" 
                                    style="stroke-dasharray: {{ (ats_score / 100 * 376.8)|round(2) }} 376.8;"></circle>
                        </svg>
                        <div class="score-value">
                            <span class="score-number">{{ ats_score }}</span>
                            <span class="score-total">/100</span>
                        </div>
                    </div>
                    <p class="score-description">How well your resume passes Applicant Tracking Systems</p>
                </div>

                <!-- Skill Match -->
                <div class="score-card">
                    <div class="score-header">
                        <h3>Skill Match</h3>
                        <span class="badge badge-{{ skill_strength|lower }}">{{ skill_strength }}</span>
                    </div>
                    <div class="circular-progress small">
                        <svg width="140" height="140">
                            <circle cx="70" cy="70" r="60" class="progress-bg"></circle>
                            <circle cx="70" cy="70" r="60" class="progress-bar skill" 
                                    style="stroke-dasharray: {{ (skill_match_percent / 100 * 376.8)|round(2) }} 376.8;"></circle>
                        </svg>
                        <div class="score-value">
                            <span class="score-number">{{ skill_match_percent }}</span>
                            <span class="score-total">%</span>
                        </div>
                    </div>
                    <p class="score-description">{{ matched_count }} of {{ total_required }} required skills found</p>
                </div>
            </div>

            <!-- Section Presence -->
            <div class="section-card">
                <h2>üìã Resume Sections</h2>
                <div class="sections-grid">
                    {% for section, present in sections_found.items() %}
                    <div class="section-item {{ 'present' if present else 'missing' }}">
                        <div class="section-icon">
                            {% if present %}
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <path d="M5 13l4 4L19 7" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            {% else %}
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <path d="M6 18L18 6M6 6l12 12" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            {% endif %}
                        </div>
                        <span>{{ section }}</span>
                    </div>
                    {% endfor %}
                </div>
                <div class="section-summary">
                    <strong>{{ sections_present }}</strong> out of <strong>{{ total_sections }}</strong> key sections found
                </div>
            </div>

            <!-- Skills Analysis -->
            <div class="skills-section">
                <div class="skills-card matched">
                    <h3>‚úÖ Matched Skills</h3>
                    <div class="skills-container">
                        {% if skills %}
                            {% for skill in skills %}
                            <span class="skill-tag matched-skill">{{ skill }}</span>
                            {% endfor %}
                        {% else %}
                            <p class="no-skills">No matching skills found</p>
                        {% endif %}
                    </div>
                </div>

                <div class="skills-card missing">
                    <h3>‚ö†Ô∏è Missing Important Skills</h3>
                    <div class="skills-container">
                        {% if missing_skills %}
                            {% for skill in missing_skills %}
                            <span class="skill-tag missing-skill">{{ skill }}</span>
                            {% endfor %}
                        {% else %}
                            <p class="no-skills">All important skills covered!</p>
                        {% endif %}
                    </div>
                </div>
            </div>

            <!-- Feedback Section -->
            {% if feedback %}
            <div class="feedback-section">
                <h2>üí° Recommendations</h2>
                <div class="feedback-list">
                    {% for item in feedback %}
                    <div class="feedback-item">
                        <div class="feedback-icon">
                            {% if '‚úÖ' in item %}
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                                <circle cx="12" cy="12" r="10" fill="#10b981"/>
                                <path d="M8 12l2 2 4-4" stroke="white" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                            {% elif '‚ö†Ô∏è' in item %}
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                                <circle cx="12" cy="12" r="10" fill="#f59e0b"/>
                                <path d="M12 8v4m0 4h.01" stroke="white" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                            {% else %}
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                                <circle cx="12" cy="12" r="10" fill="#ef4444"/>
                                <path d="M12 8v4m0 4h.01" stroke="white" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                            {% endif %}
                        </div>
                        <p>{{ item }}</p>
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% endif %}

            <!-- Stats Overview -->
            <div class="stats-grid">
                <div class="stat-item">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <div>
                        <span class="stat-label">Word Count</span>
                        <span class="stat-value">{{ word_count }}</span>
                    </div>
                </div>
                <div class="stat-item">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <div>
                        <span class="stat-label">Skills Matched</span>
                        <span class="stat-value">{{ matched_count }}/{{ total_required }}</span>
                    </div>
                </div>
                <div class="stat-item">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <div>
                        <span class="stat-label">Sections Found</span>
                        <span class="stat-value">{{ sections_present }}/{{ total_sections }}</span>
                    </div>
                </div>
            </div>

            <!-- Resume Text Preview -->
            <div class="text-preview">
                <div class="text-preview-header">
                    <h3>üìÑ Extracted Resume Text</h3>
                    <button class="toggle-text" onclick="toggleText()">Show/Hide</button>
                </div>
                <div class="text-content" id="resumeText" style="display: none;">
                    <pre>{{ text }}</pre>
                </div>
            </div>

            <!-- Actions -->
            <div class="actions">
                <a href="/" class="btn-secondary">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                        <path d="M10 19l-7-7m0 0l7-7m-7 7h18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    Analyze Another Resume
                </a>
                <button class="btn-primary" onclick="window.print()">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                        <path d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    Print Report
                </button>
            </div>

        </div>
    </div>

    <script>
        function toggleText() {
            const textContent = document.getElementById('resumeText');
            textContent.style.display = textContent.style.display === 'none' ? 'block' : 'none';
        }

        // Animate progress circles on load
        window.addEventListener('load', () => {
            document.querySelectorAll('.progress-bar').forEach(circle => {
                circle.style.transition = 'stroke-dasharray 1.5s ease-out';
            });
        });
    </script>

</body>
</html>